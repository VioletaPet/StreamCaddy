<div class="container mt-3" data-controller="filter">
  <div class="filter d-flex">
    <select id="filter-dropdown" class="form-select" data-action="change->filter#filterContent">
      <option value="all" selected>All</option>
      <option value="movies">Movies</option>
      <option value="tvshows">TV Shows</option>
    </select>

    <select id="genre-dropdown" class="form-select" data-action="change->filter#filterByGenre">
      <option value="all">All Genres</option>
      <option value="28">Action</option>
      <option value="10759">Action & Adventure</option>
      <option value="12">Adventure</option>
      <option value="16">Animation</option>
      <option value="35">Comedy</option>
      <option value="80">Crime</option>
      <option value="99">Documentary</option>
      <option value="18">Drama</option>
      <option value="10751">Family</option>
      <option value="14">Fantasy</option>
      <option value="36">History</option>
      <option value="27">Horror</option>
      <option value="10762">Kids</option>
      <option value="10402">Music</option>
      <option value="9648">Mystery</option>
      <option value="10763">News</option>
      <option value="10764">Reality</option>
      <option value="10749">Romance</option>
      <option value="878">Science Fiction</option>
      <option value="10765">Sci-Fi & Fantasy</option>
      <option value="10766">Soap</option>
      <option value="10767">Talk</option>
      <option value="10770">TV Movie</option>
      <option value="53">Thriller</option>
       <option value="10752">War</option>
      <option value="10768">War & Politics</option>
      <option value="37">Western</option>
    </select>
  </div>

  <div class="media mt-2">

  <div id="movies-section" data-filter-target="movies">
    <h1>Movies</h1>
    <div class="row">
      <% @movies.each do |movie| %>
        <div class="col-6 col-md-4" data-genre="<%= movie['genre'] %>">
          <div class="card-poster mb-4">
            <% if movie['poster_path'] %>
              <img src="https://image.tmdb.org/t/p/w500<%= movie['poster_path'] %>" alt="<%= movie['title'] %> Poster" class="card-img-top img-fluid rounded">
            <% else %>
              <img src="placeholder.jpg" alt="No poster available" class="card-img-top img-fluid rounded">
            <% end %>
            <div class="card-body d-flex mt-3">
              <h5 class="card-title" title="<%= movie['title'] %>"><%= link_to movie['title'], medium_path(id: movie['id'], title: movie['title']) %></h5>
              <div class="card-body" data-controller="button">
              <%= button_tag type: "button",
                  data: { action: "click->button#toggle" },
                  class: "icon-button" do %>
              <i data-button-target="button" class="fa-regular fa-plus"></i>
              <% end %>
            </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="tvshows-section" data-filter-target="tvshows">
    <h1>TV Shows</h1>
    <div class="row">
      <% @tvshows.each do |show| %>
        <div class="col-6 col-md-4" data-genre="<%= show['genre'] %>">
          <div class="card-poster mb-4">
            <% if show['poster_path'] %>
              <img src="https://image.tmdb.org/t/p/w500<%= show['poster_path'] %>" alt="<%= show['name'] %> Poster" class="card-img-top img-fluid rounded">
            <% else %>
              <img src="placeholder.jpg" alt="No poster available" class="card-img-top img-fluid rounded">
            <% end %>
            <div class="card-body d-flex mt-3">
              <h5 class="card-title" title="<%= show['title'] %>"><%= link_to show['name'], medium_path(id: show['id'], title: show['name']) %></h5>
              <div class="card-body" data-controller="button">
              <%= button_tag type: "button",
                  data: { action: "click->button#toggle" },
                  class: "icon-button" do %>
              <i data-button-target="button" class="fa-regular fa-plus"></i>
              <% end %>
            </div>
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

  <!-- Search Form -->
  <div class="search mb-4">
    <%= simple_form_for :search, url: media_search_path, method: :get, input_html: { class: 'd-flex align-items-center' } do |f| %>
      <%= f.input :provider, as: :select, collection: @watch_providers, input_html: { multiple: true, class: 'form-control me-2' }, prompt: "Select a provider" %>
      <%= f.text_field :query, class: "form-control", placeholder: 'Type a movie title', value: params[:query], data: {refresh_list_target: 'searchInput'}%>
      <button type="submit" class="btn btn-primary">Search</button>
    <% end %>
  </div>
